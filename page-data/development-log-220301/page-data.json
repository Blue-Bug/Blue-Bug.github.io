{"componentChunkName":"component---src-templates-post-template-tsx","path":"/development-log-220301/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>1. 테스트의 중요성</h3>\n<ul>\n<li>\n<p>postsService.updatePosts() 에서 true가 나오면 정상처리이고\r\nfalse가 나오면 잘못된 요청인데 if문에서 !를 안 붙여놔서\r\n정상처리가 잘못된 요청인듯이 나가는 오류 발견</p>\n</li>\n<li>\n<p>테스트를 하지 않았으면 발견하지 못했던 이유 :\r\n오류는 단지 flashAttribute에 오류 메시지만 담아서 보낼 뿐이고 정상처리나\r\n잘못된 요청이나 둘 다 똑같이 해당 posts 읽기페이지로 redirect 되기 때문</p>\n</li>\n</ul>\n<h3>2. 업데이트에서 새로운 내용을 추가할때</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> 한 트랜잭션안에서는 flush가 안나가므로 변경사항을 체크할 수 없다.\r\n 그러므로 1차캐시에 있는 객체에 추가해주는 로직이 들어가야만 한다.</code></pre></div>\n<h3>3. Entity에서 Cascade 옵션과 orphanRemoval 설정으로 코드를 더 줄일 수 있었다.</h3>\n<h3>4. 1차 캐시에 있는 컬렉션을 set등으로 아예 교체해버리면</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">org.hibernate.HibernateException: A collection with cascade=\"all-delete-orphan\"\r\nwas no longer referenced by the owning entity instance: com.myplaylists.domain.Posts.playlists\r\n예외 발생\r\n-> 새로 넣어준 컬렉션은 하이버네이트에 의해 관리되는 컬렉션이 아니기 때문</code></pre></div>\n<h3>5. 현재 시퀀스 생성이 1씩 증가하기 때문에 50개를 배치로 넣으면 50번의</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">nextval 쿼리가 나가는 성능 이슈가 있다. 시퀀스 생성기로 해결</code></pre></div>\n<h3>6. batch insert,update는 되는데 delete는 안되고 있음</h3>\n<h3>Source</h3>\n<ul>\n<li><a href=\"https://data-make.tistory.com/668\" target=\"_blank\" rel=\"nofollow\">https://data-make.tistory.com/668</a></li>\n<li><a href=\"https://blog.leocat.kr/notes/2016/04/26/hibernate-no-longer-reference\" target=\"_blank\" rel=\"nofollow\">https://blog.leocat.kr/notes/2016/04/26/hibernate-no-longer-reference</a></li>\n<li><a href=\"https://velog.io/@bingbong-party/JPA-SEQUENCE%EC%A0%84%EB%9E%B5\" target=\"_blank\" rel=\"nofollow\">https://velog.io/@bingbong-party/JPA-SEQUENCE%EC%A0%84%EB%9E%B5</a></li>\n<li><a href=\"https://www.inflearn.com/questions/229835\" target=\"_blank\" rel=\"nofollow\">https://www.inflearn.com/questions/229835</a></li>\n</ul>","frontmatter":{"title":"22.03.01 MyPlaylist 프로젝트 개발일지","summary":"테스트의 중요성","date":"2022.03.01.","categories":["Devlog"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7CAAAOwgEVKEqAAAABRElEQVR42q2U38qCQBDFff836KLnCLpNMOgmykoljUrLxD+YCJbW+TgDdtFXptGBYS/W/e2cmR0VPOl+v+N2u8naFO+k4Au1AtYfnc9nzGYzrNdrWJaFxWKB5XIpsVqtJC6Xy1vwA0iblGEYcigMQ5xOJ1RVJYCiKOSb/X6P3W7XHkjYfD6HpmmYTqfI81z26v0gCNoB603XdXE4HARMm6PRCIPBQEBJksjKLDsBaZW1TNMUjuPAtm3JdrPZII7jbhmydq8O1JZ5WSdgFEWPA7T43FHP8yRaA4/Ho9SQGo/HYne73Qqc2bG2bFTnGtIim6KqKnRdR7/fR6/Xw3A4lKfU+mHTLt9iWZaPul2vV0wmE7mMzWnSP2CWZTBNU6zSHieFKy9ipr7vN45f4yzTGrNjcFK4Ns3xS+Cnv8knKfixfg78A5QxKMfK1bgqAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/b4039bee1eb2fc5567e78e176715cccd/6458d/devlog.png","srcSet":"/static/b4039bee1eb2fc5567e78e176715cccd/28f38/devlog.png 95w,\n/static/b4039bee1eb2fc5567e78e176715cccd/a9ddf/devlog.png 190w,\n/static/b4039bee1eb2fc5567e78e176715cccd/6458d/devlog.png 379w","sizes":"(min-width: 379px) 379px, 100vw"},"sources":[{"srcSet":"/static/b4039bee1eb2fc5567e78e176715cccd/16684/devlog.webp 95w,\n/static/b4039bee1eb2fc5567e78e176715cccd/d8ea5/devlog.webp 190w,\n/static/b4039bee1eb2fc5567e78e176715cccd/a002b/devlog.webp 379w","type":"image/webp","sizes":"(min-width: 379px) 379px, 100vw"}]},"width":379,"height":321}},"publicURL":"/static/b4039bee1eb2fc5567e78e176715cccd/devlog.png"}}}}]}},"pageContext":{"slug":"/development-log-220301/"}},"staticQueryHashes":[],"slicesMap":{}}