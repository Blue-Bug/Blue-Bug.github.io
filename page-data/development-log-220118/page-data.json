{"componentChunkName":"component---src-templates-post-template-tsx","path":"/development-log-220118/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>1. 연관관계를 잘못 매핑했다. 객체가 아니라 클래스단위로 생각하면 쉬움</h3>\n<h4>OneToOne의 반대편은 OneToOne, OneToMany의 반대편은 ManyToOne</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  그런데 지금 OneToMany의 반대편에 OneToOne을 설정해놨고 오류없이 잘돌아간다 왜?</code></pre></div>\n<p>-> 일단 OneToOne은 지연로딩이 안된다, 지연로딩을 생각한다면 ManyToOne 을 써야하겠지만 아니라면?<br>\n-> 웹에서 검색을해봐도 OneToMany의 반대편은 당연히 ManyToOne이라는 말만 있고<br>\nOneToOne을 사용했을시 어떤 오류가 발생하는지는 안적혀있다.<br>\n-> 테이블도 내가 설계한대로 Link,Member,Posts,Playlist 4개만 존재함<br>\n-> 엔티티는 누구나 알기쉽게 구조를 가져가는것이 맞다고 생각해서 일단 ManyToOne으로 변경하였다.</p>\n<h3>2. application.properties Encoding 확인하기</h3>\n<h3>3. 로그인 수행을 하면 로그인은 되지만 /error로 redirect 되는 문제 발생</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  스프링 부트 기본 설정에 따라 요청 처리시 에러가 발생하면\r\n  org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration 가 처리한다고 한다.\r\n\r\n  프로퍼티에서 spring.autoconfigure.exclude= 로 해당 핸들러를 제외시키면 동작한다고 하지만 올바른 해결방법은 아닌것 같다.\r\n\r\n  로그인할 때 정적리소스를 찾지못하면 에러로 핸들링을 하는 것 같다.\r\n  .antMatchers(\"/favicon.ico\", \"/resources/\\*\\*\", \"/error\") 를 Web ignoring 시켜서 해결\r\n\r\n  https://docs.spring.io/spring-boot/docs/1.4.3.RELEASE/reference/html/boot-features-developing-web-applications.html#boot-features-error-handling-custom-error-pages\r\n  아니면 여기 나와있는 대로 error 폴더를 만들고 favicon을 추가시켜줘도 된다.</code></pre></div>\n<h3>4. insert가 link와 playlist가 각 갯수만큼 날라가는 문제</h3>\n<center>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d2ff7281e1793ce758d32c5d910ad183/55385/220118devlog.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.770833333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcyEQV//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAADAAAAAAAAAAAAAAAAAAAAARD/2gAIAQEAAT8hHP/aAAwDAQACAAMAAAAQCA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAYEAACAwAAAAAAAAAAAAAAAAAAEQEQQf/aAAgBAQABPxCGNqr/2Q=='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/static/d2ff7281e1793ce758d32c5d910ad183/a59e9/220118devlog.webp 192w,\n/static/d2ff7281e1793ce758d32c5d910ad183/0ca9f/220118devlog.webp 384w,\n/static/d2ff7281e1793ce758d32c5d910ad183/dc9b9/220118devlog.webp 768w,\n/static/d2ff7281e1793ce758d32c5d910ad183/9aca0/220118devlog.webp 777w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/webp\">\n          <source srcset=\"/static/d2ff7281e1793ce758d32c5d910ad183/150b2/220118devlog.jpg 192w,\n/static/d2ff7281e1793ce758d32c5d910ad183/6985d/220118devlog.jpg 384w,\n/static/d2ff7281e1793ce758d32c5d910ad183/19de6/220118devlog.jpg 768w,\n/static/d2ff7281e1793ce758d32c5d910ad183/55385/220118devlog.jpg 777w\" sizes=\"(max-width: 768px) 100vw, 768px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/static/d2ff7281e1793ce758d32c5d910ad183/19de6/220118devlog.jpg\" alt=\"220118devlog\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n</center>\n<br>\n<p>@Query(FetchMode = subselect)로 oneToMany에 걸어주고<br>\nPostsRepository에서 Post를 찾을때 fetch join을 걸어주었더니<br>\n모든 Posts를 읽어올때 쿼리가 단 3개만 날라감</p>\n<h3>6. JPQL에 ORDER BY 절로 Posts가 생성된 순으로 정렬함</h3>\n<h3>Source</h3>\n<ul>\n<li><a href=\"https://2dongdong.tistory.com/29\" target=\"_blank\" rel=\"nofollow\">https://2dongdong.tistory.com/29</a></li>\n</ul>","frontmatter":{"title":"22.01.18 MyPlaylist 프로젝트 개발일지","summary":"연관관계 매핑, /error 리다이렉트","date":"2022.01.18.","categories":["Devlog"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7CAAAOwgEVKEqAAAABRElEQVR42q2U38qCQBDFff836KLnCLpNMOgmykoljUrLxD+YCJbW+TgDdtFXptGBYS/W/e2cmR0VPOl+v+N2u8naFO+k4Au1AtYfnc9nzGYzrNdrWJaFxWKB5XIpsVqtJC6Xy1vwA0iblGEYcigMQ5xOJ1RVJYCiKOSb/X6P3W7XHkjYfD6HpmmYTqfI81z26v0gCNoB603XdXE4HARMm6PRCIPBQEBJksjKLDsBaZW1TNMUjuPAtm3JdrPZII7jbhmydq8O1JZ5WSdgFEWPA7T43FHP8yRaA4/Ho9SQGo/HYne73Qqc2bG2bFTnGtIim6KqKnRdR7/fR6/Xw3A4lKfU+mHTLt9iWZaPul2vV0wmE7mMzWnSP2CWZTBNU6zSHieFKy9ipr7vN45f4yzTGrNjcFK4Ns3xS+Cnv8knKfixfg78A5QxKMfK1bgqAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/b4039bee1eb2fc5567e78e176715cccd/6458d/devlog.png","srcSet":"/static/b4039bee1eb2fc5567e78e176715cccd/28f38/devlog.png 95w,\n/static/b4039bee1eb2fc5567e78e176715cccd/a9ddf/devlog.png 190w,\n/static/b4039bee1eb2fc5567e78e176715cccd/6458d/devlog.png 379w","sizes":"(min-width: 379px) 379px, 100vw"},"sources":[{"srcSet":"/static/b4039bee1eb2fc5567e78e176715cccd/16684/devlog.webp 95w,\n/static/b4039bee1eb2fc5567e78e176715cccd/d8ea5/devlog.webp 190w,\n/static/b4039bee1eb2fc5567e78e176715cccd/a002b/devlog.webp 379w","type":"image/webp","sizes":"(min-width: 379px) 379px, 100vw"}]},"width":379,"height":321}},"publicURL":"/static/b4039bee1eb2fc5567e78e176715cccd/devlog.png"}}}}]}},"pageContext":{"slug":"/development-log-220118/"}},"staticQueryHashes":[],"slicesMap":{}}